<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tisa:wght@400;700&display=swap" rel="stylesheet">
    <title>Sticky Notes By Anagh</title>
    <style>
   

        .button:disabled {
            background-color: #888; /* Greyed out button */
            cursor: not-allowed;
        }

        .urgent {
            color: #ff0000; /* Red color for urgent messages */
            font-weight: bold;
        }
      
      body {
   
        font-family: 'Nunito', sans-serif;
        
            margin: 0;
            padding: 0;
            background-color: #f3f3f3;
            display: flex;
            flex-direction: column;
            height: 100vh;
}

h1 {
    background: linear-gradient(90deg, #000000, #3f3f3f);
            background-clip: text;
            color: transparent;
  
    text-align: center;
        padding: 10px;
        margin: 0;
    }

    h2 {
        text-align: center;
        background: linear-gradient(90deg, #000000, #3f3f3f);
            background-clip: text;
            color: transparent;
        }

        
 







        * {
            -webkit-tap-highlight-color: transparent;
            outline: none;
        }

        /* Fade-in animation for modals */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(-20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Fade-out animation for modals */
@keyframes fadeOut {
    from {
        opacity: 1;
        transform: translateY(0);
    }
    to {
        opacity: 0;
        transform: translateY(-20px);
    }
}

/* Apply animation to modal content */
.modal-content {
    animation: fadeIn 0.3s ease forwards;

}

#passwordModal {
    display: none; 
}

#deletePasswordModal {
    display: none;
}

/* Hide modal with fade-out animation */


        

        .delete-button {
            position: relative;
            margin-left: 94%;

        }

        textarea {
            width: 97%;
            height: 120px;
            margin: 10px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-family: Arial, sans-serif;
            font-size: 16px;
        }

        input[type="password"] {
            padding: 5px;
            margin: 10px 0;
            width: 80%;
        }

        .container {
            flex: 1;
            padding: 10px;
            overflow-y: auto;
            margin-top: 6%;
        }

       

        
 

        .add-button {
            position: absolute; /* Positioning the button */
            bottom: 20px; /* Distance from the bottom */
            right: 20px; /* Distance from the right */
            background: linear-gradient(90deg, #849feb, #0059ff);
            border: none;
            color: white;
            padding: 15px 20px;
            font-size: 1.2em;
            border-radius: 25px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        
            .add-button:hover {
            background: linear-gradient(90deg, #007AFF, #4A90E2);
        }

        #aiButton {
            position: absolute; 
    bottom: 20px; /* Distance from the bottom */
    left: 20px; /* Distance from the left */
   
    color: white; /* White text */
    border: none;
    border-radius: 15px; /* Rounded corners */
    padding: 15px;
    font-size: 24px; /* Icon size */
    cursor: pointer;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    transition: background 0.3s;
    z-index: 1000; /* Ensure it appears above other elements */
}



 

        #addListSection {
            
            /* White background */
            padding: 20px;
            /* Padding around the content */
            border-radius: 8px;
            /* Rounded corners */
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            /* Shadow for depth */
            margin-top: 20px;
            /* Space above the section */
        }

        /* General modal styling */
        .modal {
            display: flex;
            /* Use flexbox for centering */
            position: fixed;
            /* Stay in place */

            left: 0;
            top: 0;
            width: 100%;
            /* Full width */
            height: 100%;
            /* Full height */
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;

        }

        .modal-content {
            
            padding: 20px;
            border-radius: 5px;
            width: 350px;
            position: absolute;
         
        }

       

        /* Hidden class to hide elements */
        .modal.hidden {
            display: none;
            /* Hide elements with this class */
        }

        .nav-button {
            background: none;
            border: none;
            color: rgb(58, 57, 57);
            font-size: 16px;
            cursor: pointer;
            margin-right: 20px;
        }
        .nav-button:hover {
            background: rgb(167, 167, 167);
        }
 

        /* Styling for password input fields */
        input[type="password"] {
            width: 100%;
            /* Full width */
            padding: 10px;
            /* Padding inside the input */
            margin: 10px 0;
            /* Margin above and below */
            border: 1px solid #ccc;
            /* Light gray border */
            border-radius: 4px;
            /* Rounded corners */
        }

        /* Button styling */
        button {
            padding: 10px 15px;
            /* Padding for buttons */
            margin: 5px 0;
            /* Margin around buttons */
            cursor: pointer;
            /* Pointer cursor on hover */
            border: none;
            /* No border */
            background: linear-gradient(90deg, #78a9e2, #0059ff);/* Teal */
            color: #000;
            /* Orange background */
            
            /* White text */
            border-radius: 4px;
            /* Rounded corners */
            transition: background 0.3s;
            /* Smooth transition for hover effect */
        }

        button:hover {
            background: linear-gradient(90deg, #007AFF, #4A90E2); /* Darker Blue on hover */
    transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .input-field {
            width: 100%;
            /* Full width */
            padding: 12px;
            /* Padding inside the input */
            margin: 10px 0;
            /* Margin above and below */
            border: 1px solid #ccc;
            /* Light gray border */
            border-radius: 4px;
            /* Rounded corners */
            transition: border-color 0.3s, box-shadow 0.3s;
            /* Smooth transition for focus effects */
        }

        .input-field:focus {
            border-color: #ffa500;
            /* Change border color on focus */
            box-shadow: 0 0 5px rgba(255, 165, 0, 0.5);
            /* Add a subtle shadow effect */
            outline: none;
            /* Remove default outline */
        }

       

        .checklist-container {
            margin-top: 15px;
            /* Space above the checklist */
        }

        .checklist-container div {
            display: flex;
            /* Flexbox for checklist items */
            align-items: center;
            /* Center items vertically */
            margin: 5px 0;
            /* Space between checklist items */
            
        }

        .checklist-container input[type="checkbox"] {
            margin-right: 10px;
            /* Space between checkbox and label */
        }

        .close-button {
            background: #ff4c4c;
            /* Red background for close button */
        }

        .close-button:hover {
            background: #ff1c1c;
            /* Darker red on hover */
        }




        input {
            margin-bottom: 10px;
            /* Space below each input */
            padding: 12px;
            /* Increased padding for better touch targets */
            font-size: 16px;
            /* Consistent font size */
            border: 1px solid #ddd;
            /* Light gray border */
            border-radius: 5px;
            /* Rounded corners */
            transition: border-color 0.3s, box-shadow 0.3s;
            /* Smooth transition for focus effects */
        }

        input:focus {
            border-color: #ffa500;
            /* Change border color on focus */
            box-shadow: 0 0 5px rgba(255, 165, 0, 0.5);
            /* Add a subtle shadow effect */
            outline: none;
            /* Remove default outline */
        }

        input[type="password"] {
            font-family: Arial, sans-serif;
            /* Ensure consistent font for password input */
        }

        .checklist-item {
            background-color: #c7c7c7;
            /* Orange background */
            padding: 10px;
            /* Padding inside the item */
            border-radius: 5px;
            /* Rounded corners */
            margin: 5px 0;
            /* Space between items */
            display: flex;
            /* Flexbox for alignment */
            align-items: center;
            /* Center items vertically */
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            /* Subtle shadow for depth */
        }

        .checklist-item input[type="checkbox"] {
            margin-right: 10px;
            /* Space between checkbox and label */
        }

        .checklist-item button {
            margin-left: auto;
            /* Push the button to the right */
            background: red;
            /* Darker orange for the button */
            color: white;
            /* White text */
            border: none;
            /* No border */
            padding: 5px 10px;
            /* Padding for the button */
            border-radius: 4px;
            /* Rounded corners for the button */
            cursor: pointer;
            /* Pointer cursor on hover */
            transition: background-color 0.3s;
            /* Smooth transition for hover effect */
        }

        .checklist-item button:hover {
            background-color: #ff6347;
            /* Lighter orange on hover */
        }

        .scan-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 20px 0;
}

.scan-circle {
    width: 100px;
    height: 100px;
    border: 10px solid #4CAF50; /* Green color */
    border-radius: 50%;
    border-top: 10px solid transparent; /* Create a spinning effect */
    animation: spin 1s linear infinite; /* Spin animation */
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}



#resultsContainer {
    margin-top: 20px;
}
     

        .container {

            flex: 1;
            padding: 10px;
            overflow-y: auto;
        }

        #messageBox {
            display: none;
            /* Hiddon by default */
            background-color: #808080;
            /* Grey color */
            color: white;
            padding: 15px;
            border-radius: 20px;
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            transition: opacity 1s ease;
            /* Fade effect */
            opacity: 1;
            /* Fully visible */
        }

    

        .calculator-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        

        /* Content Section */
        .content {
            margin-top: 20px;
            padding: 20px;
        }

        .calculator-buttons button {
            padding: 20px;
            font-size: 18px;
           
            color: rgb(0, 0, 0);
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

      

        #calculatorInput {
            width: 100%;
            padding: 10px;
            font-size: 24px;
            text-align: right;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

       

        .list-date {
            display: block; /* Ensure the date is on a new line */
    font-size: 14px;
    color: #888;
    margin-top: 5px;
    text-align: left; /* Align text to the left */

        }

        /* Style for Undo and Redo Buttons */
#undoButton, #redoButton {
    background: black;  /* Transparent background */
    color: #333; /* Default text color */
    border: 2px solid #333;  /* Border color */
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    margin: 10px;
    transition: all 0.3s ease;  /* Smooth transition for hover effects */
}

/* Hover effect for undo and redo buttons */
#undoButton:hover, #redoButton:hover {
    background: rgba(51, 51, 51, 0.1);  /* Light background on hover */
    color: #000;  /* Dark text color on hover */
}

/* Disabled state (gray color) for undo and redo buttons */
#undoButton:disabled, #redoButton:disabled {
    color: #ccc;
    background: gray;
    border-color: gray;
    cursor: not-allowed;  /* Shows not-allowed cursor */
}






        #addNoteSection {
            
            /* White background */
            padding: 20px;
            /* Padding around the content */
            border-radius: 8px;
            /* Rounded corners */
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            /* Shadow for depth */
            margin-top: 20px;
            /* Space above the section */
            
            
        }

        #undoButton i, #redoButton i {
    margin-right: 5px;
}

p {
    text-align: center;
    color: #555;
    margin-bottom: 20px;
}

.feature-buttons {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 15px;
}

.feature-item {
    text-align: center;
    flex: 1 1 200px; /* Flex-grow, flex-shrink, flex-basis */
    min-width: 150px; /* Minimum width for smaller screens */
}

.feature-button {
    background: transparent;
 /* Blue border */
    border-radius: 5px;
    padding: 15px;
    width: 120px;
    cursor: pointer;
    transition: all 0.3s ease;
    color: rgb(0, 0, 0); /* Text color */
}

.feature-button i {
    font-size: 24px;
    color: #007bff; /* Blue icon color */
}

.feature-button:hover {
    background: rgb(143, 143, 143); /* Blue background on hover */
  
}

.feature-description {
    margin-top: 5px;
    color: #777; /* Description text color */
    font-size: 14px;
}

        i {
            margin-right: 8px;
            /* Space between icon and text */
        }

        /* General styles for the container */
        #calendarSection {
            font-family: 'Arial', sans-serif;
            flex: 1;
            padding: 10px;
            overflow-y: auto;
        }

       

        /* Styling for the month navigation */
        .month {
            background-color: #474747;
            /* Orange color */
            padding: 10px 0;
            text-align: center;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .month ul {
            display: flex;
            justify-content: space-between;
            align-items: center;
            list-style-type: none;
            margin: 0;
            padding: 0;
        }

        .month ul li {
            font-size: 1.2em;
            color: white;
            cursor: pointer;
            user-select: none;
        }

        .month ul li#monthYear {
            font-weight: bold;
            font-size: 1.5em;
            color: white;
            margin-right: 600px;
        }

        /* Hover effects for previous/next buttons */
        .month ul li:hover {
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
        }

        /* Styling for the weekdays (Mo, Tu, etc.) */
        .weekdays {
            display: flex;
            justify-content: space-around;
            list-style-type: none;
            padding: 0;
            margin-bottom: 10px;
            background-color: #f4f4f4;
            border-radius: 5px;
        }

        .weekdays li {
            width: 35px;
            text-align: center;
            font-weight: bold;
            color: #333;
        }

        /* Styling for the days grid */
        .days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            /* 7 columns for the days of the week */
            grid-gap: 5px;
            /* Space between grid items */
            padding: 0;
            list-style-type: none;
            margin: 0;
            border: 1px solid #ccc;
            /* Add border around the entire days grid */
        }

        /* Styling for individual day cells */
        .days li {
            width: 35px;
            height: 35px;
            line-height: 35px;
            text-align: center;
            border: 1px solid #ccc;
            /* Add border around each day */
            border-radius: 5px;
            /* Rounded corners for a softer look */
            cursor: pointer;
            font-size: 1.1em;
            color: #333;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Hover effect for days */
        .days li:hover {
            background-color: #eeeeee;
            /* Hover effect with the same orange color */
            color: white;
        }

        /* Styling for today's date */
        .days li.active {
            background-color: #8f8f8f;
            /* A distinct background for today's date */
            color: white;
        }

        /* Selected day */
        .days li.selected {
            background-color: #363636;
            color: white;
        }

        /* Disabled days (out of the current month) */
        .days li.disabled {
            color: #000000;
            pointer-events: none;
        }

        /* Style for previous/next button */
        .prev,
        .next {
            cursor: pointer;
            font-size: 1.5em;
            color: white;
            padding: 5px;
            border-radius: 50%;
        }

        .prev:hover,
        .next:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .prev {
            margin-left: 10px;
        }

        .next {
            margin-right: 10px;
        }



        
#addItemButton {
    
    color: rgb(0, 0, 0); /* White text */
    border: none; /* No border */
    border-radius: 25px; /* Rounded corners */
    padding: 10px 20px; /* Padding for the button */
    cursor: pointer; /* Pointer cursor on hover */
    transition: background-color 0.3s; /* Smooth transition */
    height: 40px; /* Set height to match the input field */
    display: flex; /* Flexbox for centering */
    align-items: center; /* Center vertically */
    justify-content: center; /* Center horizontally */
    

}







        #checklistContainer {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        #checklistContainer li {
            padding: 10px;
            border-bottom: 1px solid #ccc;
        }

        #checklistContainer li:last-child {
            border-bottom: none;
        }

        .modal-content h2 {
            margin: 0 0 20px;
            color: #333;
        }

        .modal-content input {
            width: 100%;
            padding: 10px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .modal-content button {
           
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }

      





       

        #changePasswordButton {
            color: #ffffff;
        }

        .settings-button {
    background: transparent; /* Transparent background */
    border: none; /* No border */
    color: black; 
    font-size: 24px; /* Size of the icon */
    cursor: pointer; /* Pointer cursor on hover */
    position: j;
    right: 20px; /* Distance from the right */
    top: 50%; /* Center vertically */
    transform: translateY(-50%); /* Adjust for vertical centering */
    transition: color 0.3s ease, background-color 0.3s ease; /* Smooth transition for hover effect */
}

.settings-button:hover {
    color: #FF6F61; /* Change color on hover */
    background-color: rgba(255, 255, 255, 0.2); /* Light background on hover with transparency */
    border-radius: 5px; /* Optional: rounded corners for the hover effect */
}


.top-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            width: 100%;
            height: 55px;
            color: white;
            padding: 10px 20px;
            z-index: 1000;
        }

        .top-nav h1 {
            margin: 0;
        }

        .top-nav .nav-buttons {
            display: flex;
            gap: 15px;
        }

        .note {
    border-left: 5px solid #4A90E2;
    border-radius: 5px;
    padding: 10px;
    margin: 10px;
    background-color: #ffffff; /* Dark note background */
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.note h4 {
    margin: 0;
    color: #000000; /* White text for note title */
}

.note-date {
    display: block;
    font-size: 14px;
    color: #888;
    margin-top: 5px;
}

.delete-btn {
    background: #ff1c1c;
    color: #fff;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
}

.delete-btn:hover {
    background: #df0909;
}

        .note .icon {
            position: absolute;
            bottom: 10px;
            left: 10px;
            font-size: 18px;
            color: #4A90E2; /* Icon color */
        }

        .note .pin-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 18px;
            color: #FF6F61; /* Pin icon color */
        }

  

    

       

      



   

h2, h3 {
    color: #333; /* Darker text for headings */
}

.backup-import {
    display: flex;
    flex-direction: column;
    gap: 10px; /* Space between buttons and input */
}

.action-button {
    background-color: #007bff; /* Blue background for action buttons */
    color: white;
    border: none;
    padding: 10px;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.action-button:hover {
    background-color: #0056b3; /* Darker blue on hover */
}

.setting-category {
    margin-top: 15px;
    border: 1px solid #ddd; /* Light border for categories */
    border-radius: 5px;
    padding: 10px;
}

.setting-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
}

.toggle-icon {
    font-size: 18px;
    color: #007bff; /* Blue color for toggle icons */
}

.checkbox-label {
    display: flex;
    align-items: center;
    margin-top: 10px;
}

.file-input {
    margin-top: 10px;
    padding: 5px;
    border: 1px solid #ccc; /* Light border for file input */
    border-radius: 5px;
}

.hidden {
    display: none;
}

.toggle-icon {
    font-size: 20px;
}

.tabs {
    display: flex;
    justify-content: space-around;
    margin-bottom: 20px;
}

.tab-button {
    padding: 10px 20px;
    border: none;
    background-color: #f1f1f1;
    cursor: pointer;
    transition: background-color 0.3s;
}

.tab-button.active {
    background-color: #ccc;
}



.tab-content.active {
    display: block;
}



/* Modal styling */
#snbakeyVerificationModal {
    
    position: fixed; /* Fixed position to cover the entire viewport */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    background-color: #000; /* Semi-transparent black background */
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    z-index: 1000; /* Ensure it appears above other elements */
    
}



/* Modal content styling */
#snbakeyVerificationModal .modal-content {
    background-color: white; /* White background for the modal */
    padding: 20px; /* Padding inside the modal */
    border-radius: 10px; /* Rounded corners */
    width: 350px; /* Fixed width */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Subtle shadow for depth */
}

/* Gradient button styling */
#snbakeyVerificationModal .gradient-button {
    background: linear-gradient(90deg, #FF6F61, #FF3D00); /* Gradient background */
    color: rgb(0, 0, 0); /* White text color */
    border: none; /* No border */
    padding: 10px 20px; /* Padding for the button */
    border-radius: 5px; /* Rounded corners */
    cursor: pointer; /* Pointer cursor on hover */
    transition: background 0.3s ease; /* Smooth transition for hover effect */
}

#snbakeyVerificationModal .gradient-button:hover {
    background: linear-gradient(90deg, #FF3D00, #FF6F61); /* Reverse gradient on hover */
}

/* Fade-in animation for modals */
@keyframes fadeIn {
    from {
        opacity: 0; /* Start fully transparent */
    }
    to {
        opacity: 1; /* End fully opaque */
    }
}

#snbakeyVerificationModal.modal.hidden {
    display: hidden;
}

.setting-category div {
    padding: 10px;
   
    border: 1px solid #ccc;
    border-radius: 5px;
    margin-top: 5px;
}
        


        .email-item {
            padding: 10px;
            cursor: pointer;
            border-bottom: 1px solid #555555;
        }

        .email-item:hover {
            background-color: #000000; /* Highlight on hover */
        }

        .content {
            flex: 1;
            padding: 20px;
            background-color: #666666; /* Content background */
        }

        .email-content {
            display: none; /* Hidden by default */
        }

        .email-content h2 {
            margin: 0 0 10px;
        }

        .email-content p {
            margin: 5px 0;
        }

        #loadingCircle {
    font-size: 24px;
    margin-top: 20px;
    display: none; /* Initially hidden */
    
}

#loadingCircle i {
    font-size: 24px; /* Adjust size as needed */
    animation: spin 1s linear infinite; /* Spin animation */
    
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* General Styles for the Update Section */
#update {
    max-width: 600px;
    margin: 0 auto;
    padding: 20px;
    
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    text-align: center;
}

/* Heading Style */
#update h2 {
    color: #4CAF50;
    margin-bottom: 20px;
}

/* Button Styles */
#update button {
    display: block;
    width: 100%;
    padding: 15px;
    font-size: 18px;
    border: none;
    border-radius: 5px;
    background-color: #4CAF50;
    color: white;
    cursor: pointer;
    margin-top: 20px;
    transition: background-color 0.3s;
}

#update button:hover {
    background-color: #45a049;
}

/* Loading Circle Style */
#loadingCircle {
    font-size: 18px;
    margin-top: 20px;
    
}

/* Update Modal Styles */
#updateModal {
   
    position: fixed;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: #000000;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

/* Modal Content Style */
#updateModal .modal-content {
    text-align: center;
    color: white;
    background: #000000;
    padding: 30px;
    border-radius: 10px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
}

/* Icon Style in Modal */
#updateModal .modal-content i {
    margin-bottom: 20px;
}

#updateModal .modal.hidden {
    display: none;
}

/* Progress Bar Style */
#modalProgress {
    width: 80%;
    height: 20px;
    margin-top: 20px;
    border-radius: 5px;
    background-color: #ddd;
}

#modalProgress::-webkit-progress-bar {
    background-color: #eee;
    border-radius: 5px;
}

#modalProgress::-webkit-progress-value {
    background-color: #4CAF50;
    border-radius: 5px;
}

/* Setup Message Style */
#setupMessage {
    text-align: center;
    font-size: 20px;
    color: #ffffff;
    margin-top: 20px;
}

/* Boot Animation */
@keyframes bootAnimation {
    0% {
        transform: scale(0.8);
        opacity: 0;
    }
    50% {
        transform: scale(1.1);
        opacity: 1;
    }
    100% {
        transform: scale(1);
    }
}

.boot-animation {
    animation: bootAnimation 0.5s ease-in-out forwards; /* Animation duration and easing */
}

#bootAnimation {
    display: none; /* Initially hidden */
    color: white; /* White text for boot animation */
    font-size: 24px; /* Adjust font size as needed */
    margin-top: 20px; /* Space above the boot animation */
}
    </style>
</head>

<body>
   
    <div class="top-nav">
        <button class="nav-button" onclick="showSection('moreSection')">
            <i class="fas fa-bars"></i>
        </button>

  
        <h1>Notes</h1>
        <div class="nav-buttons">
            <button class="nav-button" onclick="toggleSearchInput()">
                <i class="fas fa-search"></i>
            </button>
            <button class="nav-button" onclick="showSection('combinedContainer')">
                <i class="fas fa-home"></i>
            </button>
            <button class="nav-button" onclick= "showSection('settingsSection')"><i class="fas fa-cog"></i></button>
           
        </div>
        </div>
    

    <input type="text" id="searchInput" placeholder="Search your notes and lists..." oninput="searchNotes()"
        style="width: 80%; margin: 10px auto; display: none;">

    <!-- Combined Notes and Lists Section -->
    <div id="combinedContainer" class="container">
        <h2>Your Notes and Lists</h2>
        <div id="notesContainer"></div>
        <div id="listsSection">
            <div id="listsContainerContent"></div>
        </div>
        <div id="noListsMessage" class="hidden">No lists added.</div>
        <div id="noNotesMessage" class="hidden">No notes added.</div>
    </div>
   
    








    <div id="messageBox">This is an Android-like message box!</div>

    <!-- Add Note Form -->
    <!-- Add Note Form -->
    <div id="addNoteSection" class="container hidden">
       
            <button onclick="cancelNote()"><i class="fas fa-arrow-left back-icon"></i>Back</button>
            <button onclick="saveNote()"><i class="fas fa-save"></i> Save</button>
            
            <button id="changePasswordButton" onclick="togglePasswordInput()" style="padding: 10px 15px;margin: 5px 0;cursor: pointer;border: none;background-color: #fbff00; /* Teal */
            color: #000;border-radius: 4px;transition: background-color 0.3s;">
                <i class="fas fa-lock"></i> Manage Your Password
            </button>
                
               
        <h3 id="manageNoteTitle">Manage Your Note</h3>
        <input type="text" id="noteTitle" placeholder="Enter your note title...">
        <textarea id="noteContent" placeholder="Write your note here...">
            </textarea>

<button id="undoButton" onclick="undo()">
    <i class="fas fa-undo"></i> 
</button>

<button id="redoButton" onclick="redo()">
    <i class="fas fa-redo"></i> 
</button>

            <input type="password" id="notePassword" placeholder="Enter New Password.." class="hidden">
    </div>




   

    <!-- Add Lists Section -->
    <div id="addListSection" class="container">
        
            <button onclick="cancelList()"><i class="fas fa-arrow-left back-icon" ></i>Back</button>
            <button onclick="saveList()"><i class="fas fa-save"></i>Save</button>
            <button id="manageListPassword" onclick="showListPassword()">
                <i class="fas fa-lock"></i> Manage Your Password
            </button>
        

        
        <h3 id="manageListTitle">Manage Your List</h3>
        <input type="text" id="listTitle" placeholder="Enter your list title..."> <br>
       
            <input id="newItem" type="text" placeholder="Enter item name..."> <!-- Input for new item -->
        
        <button id="addItemButton" onclick="addItem()"><i class="fas fa-plus"></i>Add Item</button>
        <!-- Button to add item -->
        <br>
        
        <input type="password" id="listPassword" placeholder="Enter New Password.." class="hidden">
        <div id="checklistContainer"></div> <!-- Container for checklist items -->
        
    </div>
    

    <!-- Add Options Modal -->
    <div id="addOptionsModal" class="modal hidden">
        <div class="modal-content">
            <h3>Add Options</h3>
            <button id="addNoteButton" onclick="showAddNote()"><i class="fas fa-list"></i>Add Note</button>
            <button id="addListButton" onclick="showAddListSection()"><i class="fas fa-sticky-note"></i>Add
                List</button>
            <button onclick="closeAddOptions()"><i class="fas fa-times"></i>Close</button>
        </div>
    </div>


    <div id="dataManagementSection" class="container hidden">
        <h2>Data Management</h2>
        <div id="progressContainer" style="display:none;">
            <p id="progressText">Operation in progress...</p>
            <progress id="progressBar" value="0" max="100"></progress>
        </div>
        <button onclick="backupNotes()">Backup Notes</button>
        <input type="file" id="importFile" onchange="prepareImport(event)" />
        <button onclick="importNotes()">Import Notes</button>
        <br>
       
        <div id="dataStats">
            <br>
            <p>Total Notes: <span id="noteCount">0</span></p>
            <p>Total Lists: <span id="listCount">0</span></p>
        </div>
        
    </div>
    



    <!-- Password Modal -->
    <div id="passwordModal" class="modal hidden">
        <div class="modal-content">
            <h3>Enter Password To Access The content</h3>
            <input type="password" id="passwordInput" placeholder="Password">
            <button onclick="verifyPassword()">Submit</button>
            <button onclick="closePasswordModal()">Close</button>
        </div>
    </div>

    <!-- Delete Password Modal -->
    <div id="deletePasswordModal" class="modal hidden">
        <div class="modal-content">
            <h3>Enter Password To Delete The content</h3>
            <input type="password" id="deletePasswordInput" placeholder="Password">
            <button onclick="deleteVerifyPassword()">Submit</button>
            <button onclick="closeDeletePasswordModal()">Close</button>
        </div>
    </div>



   

   

    <button class="add-button" onclick="showAddOptions()">
        <i class="fas fa-plus"></i> Add
    </button>
    <button id="aiButton" onclick="showMessageBox('AI feature is in development. It will be released in AI update.')">
        <i class="fas fa-magic"></i> 
    </button>
   
  
   



    
    <div id="moreSection" class="container hidden">
        <h2>More Features</h2>
        <p>Explore the additional features of our app that enhance your experience and productivity. Click on any feature to learn more!</p>
        <div class="feature-buttons">
            <div class="feature-item">
                <button onclick="toggleFeatureSection('privacyInfoSection')" class="feature-button">
                    <i class="fas fa-user-shield"></i>
                    <br>
                    Privacy Info
                </button>
                <p class="feature-description">Manage your privacy settings and control who sees your information.</p>
            </div>
            <div class="feature-item">
                <button onclick="showSection('calculatorSection')" class="feature-button">
                    <i class="fas fa-calculator"></i>
                    <br>
                    Calculator
                </button>
                <p class="feature-description">Use our built-in calculator for quick calculations without leaving the app.</p>
            </div>
            <div class="feature-item">
                <button id="notifyButton" class="feature-button">
                    <i class="fas fa-bell"></i>
                    <br>
                    Notifications
                </button>
                <p class="feature-description">Stay updated with real-time notifications for important events.</p>
            </div>
            <div class="feature-item">
                <button onclick="showSection('settingsSection')" class="feature-button">
                    <i class="fas fa-cog"></i>
                    <br>
                    Settings
                </button>
                <p class="feature-description">Customize your app experience through various settings options.</p>
            </div>
            <div class="feature-item">
                <button onclick="showSection('inbox')" class="feature-button">
                    <i class="fas fa-inbox"></i>
                    <br>
                    Inbox
                </button>
                <p class="feature-description">Access your messages and notifications in one convenient inbox.</p>
            </div>
            <div class="feature-item">
                <button onclick="showSection('calendarSection')" class="feature-button">
                    <i class="fa fa-calendar"></i>
                    <br>
                    Calendar
                </button>
                <p class="feature-description">Keep track of your events and deadlines with our integrated calendar.</p>
            </div>
        </div>
    </div>

    <!-- Feature Sections -->
    <div id="privacyInfoSection" class="feature-section hidden">
        <button onclick="closeFeatureSection('privacyInfoSection')">Close</button>
        <h3>Privacy Information and About Our website</h3>
        <p>Our website developed by indiviual developer offers a versatile platform designed to help you keep all your
            important notes, lists, and tasks organized in one place. It features a simple and user-friendly interface
            that allows you to create, edit, and manage notes with ease. You can categorize your lists into different
            sections, customize them according to your needs, and add tasks with deadlines. The website also supports
            organizing notes based on subjects, topics, or any other categories you choose. With various tools and
            features like reminders, tags, and filters, it helps you stay on top of your work and study plans. The
            website’s flexible structure ensures that you can create a personalized environment tailored to your
            individual needs.</p>

        <p>Security is our top priority, and we understand the importance of keeping your personal information safe. All
            your notes and lists are stored locally on your device, meaning there is no cloud syncing or external
            backend service that could potentially expose your data. By utilizing local storage, your information stays
            private and secure within the confines of your device. Additionally, we implement robust encryption
            techniques to protect your data. Whether you’re typing a note or organizing a list, all data is encrypted in
            real-time to ensure that no one can access it without your authorization. We also offer password protection
            for both notes and lists, providing an added layer of security. This feature ensures that only you can view
            and edit your sensitive content, preventing unauthorized access.</p>

        <p>In addition to the note-taking and list-keeping features, the website is part of a broader educational
            platform that includes various tools and projects designed for students and educators. This includes the
            "Notes and Lists Vista," which helps users manage their accounts and access their saved notes and lists, as
            well as the "School Tools Platform," which provides a range of educational tools and resources. The website
            also integrates a collaborative environment for users to exchange ideas and learning materials. With this
            combination of tools, we aim to provide a comprehensive space for learning, organizing, and improving
            productivity in educational settings.</p>
        <button onclick="closeFeatureSection('privacyInfoSection')">Close</button>
    </div>

    <div id="settingsSection" class="container hidden">
        <button onclick="showSection('moreSection')">Close</button>
        <p>Press home to return to home</p>
        <h2>Credits</h2>
        <p>Developed by <strong>Anagh Manglick</strong><br>Inspired by Color Notes</p>
        <br>
    <hr>
    <br>
        <h3 style="text-align: center;">Backup/Import</h3>
        <button onclick="backupNotes()">Backup Notes</button>
        <input type="file" id="importFile" onchange="prepareImport(event)">
        <button onclick="importNotes()">Continue Import</button>
        <button class="button" disabled>Battery Optimization: On</button>
        <br>
        <hr>
        <br>
    
        <h2>Security Settings</h2>
    
        <!-- Data Management Section -->
        <div class="setting-category">
            <h3 onclick="toggleSection('encryptionSection')">
                <i class="fas fa-lock"></i> Data Management
                <span class="toggle-icon" id="encryptionToggle">+</span>
            </h3>
            <div id="encryptionSection" class="hidden">
                <button onclick="goBack()">Back</button>
                <button onclick="clearData()">Clear All Data</button>
                <button onclick="encryptData()">Encrypt Data</button>
                <button onclick="decryptData()">Decrypt Data</button>
                <button onclick="showMessageBox('Server-side features will be added in future updates. Stay tuned')">Allow data management on Server-side</button>
            </div>
        </div>
    
        <!-- Password Management Section -->
        <div class="setting-category">
            <h3 onclick="toggleSection('passwordManagementSection')">
                <i class="fas fa-key"></i> Password Management
                <span class="toggle-icon" id="passwordManagementToggle">+</span>
            </h3>
            <div id="passwordManagementSection" class="hidden">
                <button onclick="goBack()">Back</button>
                <button class="gradient-button" onclick="openSNBAKeySetupModal()">Setup/Reset SNBA Key</button>
            </div>
        </div>
    
        <!-- Lock Notes Section -->
        <div class="setting-category">
            <h3 onclick="toggleSection('lockNotesSection')">
                <i class="fas fa-lock"></i> Lock Notes
                <span class="toggle-icon" id="lockNotesToggle">+</span>
            </h3>
            <div id="lockNotesSection" class="hidden">
                <button onclick="goBack()">Back</button>
                <label>
                    <input type="checkbox" id="lockNotes" />
                    Lock notes after inactivity
                </label>
            </div>
        </div>

    

    <div class="setting-category">
<h3 onclick="toggleSection('openAntiSection')">

    <i class="fas fa-shield-alt"></i> Scan For Threats
    <span class="toggle-icon" id="openAntiToggle">+</span>
</h3>
<div id="openAntiSection" class="hidden">
    <button onclick="goBack()">Back</button>
    <button onclick="showSection('antivirusSection')">Open</button>

</div>

    </div>
    <div class="setting-category">
        <h3 onclick="toggleSection('updateSection')">
        <i class="fas fa-check"></i> Update OS
        <span class="toggle-icon" id="openAntiToggle">+</span>
        </h3>
        <div id="updateSection" class="hidden">
            <button onclick="showSection('update')">Open section</button>
            
        </div>
    </div>
    </div>

    <div id="settingsSection" class="container hidden">
        <button onclick="showSection('moreSection')" class="close-button">Close</button>
        <p>Press home to return to home</p>
        
        <h2>Settings</h2>
        
        <div class="tabs">
            <button class="tab-button active" onclick="showTab('backupImport')">Backup/Import</button>
            <button class="tab-button" onclick="showTab('securitySettings')">Security Settings</button>
            <button class="tab-button" onclick="showTab('dataManagement')">Data Management</button>
            <button class="tab-button" onclick="showTab('passwordManagement')">Password Management</button>
        <button class="tab-button" onclick="showTab('sct')">Scan threats</button>
        <button class="tab-button" onclick="showTab('u')">Update</button>
        
        </div>
        
        <div id="backupImport" class="tab-content active">
            <h3>Backup/Import</h3>
            <div class="backup-import">
                <button onclick="backupNotes()" class="action-button">Backup Notes</button>
                <input type="file" id="importFile" onchange="prepareImport(event)" class="file-input" />
                <button onclick="importNotes()" class="action-button">Continue Import</button>
            </div>
        </div>
        
        <div id="securitySettings" class="tab-content">
            <h3>Security Settings</h3>
            <div class="setting-category">
                <h3 onclick="toggleSection('lockNotesSection')" class="setting-header">
                    <i class="fas fa-lock"></i> Lock Notes
                    <span class="toggle-icon" id="lockNotesToggle">+</span>
                </h3>
                <div id="lockNotesSection" class="hidden">
                    <label class="checkbox-label">
                        <input type="checkbox" id="lockNotes" />
                        Lock notes after inactivity
                    </label>
                    <button onclick="saveSettings()" class="action-button">Save Settings</button>
                </div>
            </div>
        </div>
        
        <div id="dataManagement" class="tab-content">
            <h3>Data Management</h3>
            <div class="setting-category">
                <h3 onclick="toggleSection('encryptionSection')" class="setting-header">
                    <i class="fas fa-lock"></i> Data Management
                    <span class="toggle-icon" id="encryptionToggle">+</span>
                </h3>
                <div id="encryptionSection" class="hidden">
                    <button onclick="goBack()" class="action-button">Back</button>
                    <button onclick="clearData()" class="action-button">Clear All Data</button>
                    <button onclick="encryptData()" class="action-button">Encrypt Data</button>
                    <button onclick="decryptData()" class="action-button">Decrypt Data</button>
                    <button onclick="showMessageBox('Server-side features will be added in future updates. Stay tuned')" class="action-button">Allow data management on Server-side</button>
                </div>
            </div>
        </div>
        
        <div id="passwordManagement" class="tab-content">
            <h3>Password Management</h3>
            <div class="setting-category">
                <h3 onclick="toggleSection('passwordManagementSection')" class="setting-header">
                    <i class="fas fa-key"></i> Password Management
                    <span class="toggle-icon" id="passwordManagementToggle">+</span>
                </h3>
                <div id="passwordManagementSection" class="hidden">
                    <button onclick="goBack()" class="action-button">Back</button>
                    <button class="action-button" onclick="openSNBAKeySetupModal()">Setup/Reset SNBA Key</button>
                </div>
            </div>
        </div>
        <div id="sct" class="tab-content">
            <h3 onclick="toggleSection('openAntiSection')">
            
                <i class="fas fa-shield-alt"></i> Scan For Threats
                <span class="toggle-icon" id="openAntiToggle">+</span>
            </h3>
            <div id="openAntiSection" class="hidden">
                <button onclick="goBack()">Back</button>
                <button onclick="showSection('antivirusSection')">Open</button>
            
            </div>
            
                </div>
                <div id="u" class="tab-content">
                    <h3 onclick="toggleSection('updateSection')">
                    <i class="fas fa-check"></i> Update OS
                    <span class="toggle-icon" id="openAntiToggle">+</span>
                    </h3>
                    <div id="updateSection" class="hidden">
                        <button onclick="showSection('update')">Open section</button>
                        
                    </div>
                </div>
    
        <hr>
        
        <h2>Credits</h2>
        <p>Developed by <strong>Anagh Manglick</strong><br>
        Inspired by <strong>Good Keep Notes</strong> and <strong>ColorNote</strong>, along with my own creativity.</p>
    </div>

    <div id="antivirusSection" class="container">
        <h2>Antivirus Scan</h2>
        <div class="scan-container">
            <div class="scan-circle" id="scanCircle"></div>
            <p id="scanStatus">Click the button to start scanning...</p>
        </div>
        <button onclick="startScan()">Start Scan</button>
        <div id="resultsContainer"></div>
    </div>





    <div id="calculatorSection" class="container hidden">
        <h3>Calculator</h3>
        <button onclick="showSection('moreSection')">Close</button>
        <input type="text" id="calculatorInput" placeholder="0" readonly>
        <div class="calculator-buttons">
            <button onclick="appendToCalculator('7')">7</button>
            <button onclick="appendToCalculator('8')">8</button>
            <button onclick="appendToCalculator('9')">9</button>
            <button onclick="appendToCalculator('/')">/</button>
            <button onclick="appendToCalculator('4')">4</button>
            <button onclick="appendToCalculator('5')">5</button>
            <button onclick="appendToCalculator('6')">6</button>
            <button onclick="appendToCalculator('*')">*</button>
            <button onclick="appendToCalculator('.')">.</button>
            <button onclick="appendToCalculator('1')">1</button>
            <button onclick="appendToCalculator('2')">2</button>
            <button onclick="appendToCalculator('3')">3</button>
            <button onclick="appendToCalculator('-')">-</button>
            <button onclick="appendToCalculator('0')">0</button>
            <button onclick="calculateResult()">=</button>
            <button onclick="clearCalculator()">C</button>
            <button onclick="appendToCalculator('+')">+</button>
        </div>
    </div>

    <div id="inbox" class="container hidden">
        
        <div class="sidebar">
            <h2>Inbox</h2>
            <div class="email-item" onclick="showEmail('updateEmail')">
                Release Notes of update 5.2
            </div>
           
            <!-- Additional email items can be added here -->
        </div>
    
      
        <div id="updateEmail" class="email-content">
            <p><strong>Subject:</strong> 🚀 Big Update released</p>
            <p><strong>From:</strong> ListVista Team</p>
            <p><strong>Dear User Community,</strong></p>
            <p>We hope you're doing well!</p>
            <p></p>
            <hr>
            <h3>🛠 Major App Rebuild in Progress</h3>
            <p>We’re exited to share that now our website is converted into a <strong> operating system site </strong> with a new update system and bug fixes.</p></strong> for a smoother, faster, and more modern experience.</p>
            <hr>
            <h3>🧪 Recent Fixes:</h3>
            <p><strong>minor UI related bugs are fixed in this update</strong> to improve screen rendering and layout on various devices.</p>
           
            <hr>
            <h3>🔄 Feature Added:</h3>
            <p>From now on, <strong>you can update this os site using an update setion accesed by the settings section of our site</p>
           <hr>
            <p>Thank you for your continued support and patience. We’re working hard to deliver an awesome experience to everyone, across every device.</p>
            <p><strong>Warm regards,</strong></p>
            <p><strong>ListVista</strong></p>
        </div>
    </div>
    <!-- List Password Modal -->
    <div id="listPasswordModal" class="modal hidden">
        <div class="modal-content">
            <h3>Enter Password to Access the List</h3>
            <input type="password" id="listPasswordInput" placeholder="Password">
            <button onclick="verifyListPassword()">Submit</button>
            <button onclick="closeListPasswordModal()">Close</button>
        </div>
    </div>


    <!-- Delete List Password Modal -->
    <div id="deleteListPasswordModal" class="modal hidden">
        <div class="modal-content">
            <h3>Enter Password to Delete the List</h3>
            <input type="password" id="deleteListPasswordInput" placeholder="Password">
            <button onclick="deleteListVerifyPassword()">Submit</button>
            <button onclick="closeDeleteListPasswordModal()">Close</button>
        </div>
    </div>

    

    <div id="calendarSection" class="container">
        <h2>Calendar</h2>
        <div class="month">
            <ul>
                <li class="prev" onclick="changeMonth(-1)">&#10094;</li>
                <li class="next" onclick="changeMonth(1)">&#10095;</li>
                <li id="monthYear"></li>
            </ul>
        </div>

        <ul class="weekdays">
            <li>Mo</li>
            <li>Tu</li>
            <li>We</li>
            <li>Th</li>
            <li>Fr</li>
            <li>Sa</li>
            <li>Su</li>
        </ul>

        <ul class="days" id="daysContainer"></ul>
    </div>

    <!-- Update Modal -->
    <div id="update" class="container hidden">
        <h2>Anagh OS Update</h2>
        <p>Click the button below to check for updates and start the update process.</p>
        <button id="updateButton" onclick="checkForUpdates()">Check Update</button>
        
        <!-- Loading Circle (Initially Hidden) -->
        <div id="loadingCircle" style="display: none;">
            <i class="fas fa-spinner fa-spin"></i> Checking for updates...
        </div>
        
        <!-- Update Modal (Initially Hidden) -->
        <div id="updateModal" class="modal hidden">
            <div class="modal-content">
                <i class="fas-fa-sticky-note" style="font-size: 40px;"></i>
                <h2 style="margin-bottom: 20px;">Anagh OS</h2>
                <div id="bootAnimation" style="display: none; text-align: center; margin-top: 50px;">
                    <p style="font-size: 24px; color: white;">Booting...</p>
                    <i class="fas fa-spinner fa-spin" style="font-size: 48px; margin-top: 20px;"></i>
                </div>
                <progress id="modalProgress" value="0" max="100" style="display: none;"></progress>
                <div id="setupMessage" class="hidden" style="text-align: center; margin-top: 20px;">
                    Optimization in progress...
                </div>
            </div>
        </div>
    </div>


<!-- SNBA Key Setup Modal -->
<div id="snbakeySetupModal" class="modal hidden">
    <div class="modal-content">
        <h3>Setup SNBA Key</h3>
        <input type="password" id="snbakey" placeholder="Enter your SNBA Key" required />
        <input type="password" id="confirmSnbakey" placeholder="Confirm your SNBA Key" required />
        <button class="gradient-button" onclick="saveSNBAKey()">Save SNBA Key</button><p>Press above button if 
            you want to
remove SNBA key
        </p>
        <button onclick="closeSNBAKeySetupModal()">Close</button>
    </div>
</div>

<!-- SNBA Key Verification Modal -->
<div id="snbakeyVerificationModal" class="modal hidden">
    <div class="modal-content">
        <h3>Enter SNBA Key</h3>
        <input type="password" id="snbakeyInput" placeholder="Enter your SNBA Key" required />
        <button class="gradient-button" onclick="verifySNBAKey()">Verify SNBA Key</button>
    </div>
</div>


    <script>


        let notes = JSON.parse(localStorage.getItem('notes')) || [];
        let editingNoteIndex = null;
        let currentNoteId = null;
        let currentDeleteNoteId = null;
       
   
let historyStack = [];
let currentIndex = -1;

// Function to save the current state of the textarea into history stack
function saveState() {
    const noteContent = document.getElementById('noteContent').value;
    
    // If the current index is not the last element in the stack, remove any "future" states
    if (currentIndex < historyStack.length - 1) {
        historyStack = historyStack.slice(0, currentIndex + 1);
    }

    // Add the current content to the history stack
    historyStack.push(noteContent);
    currentIndex++;

    toggleButtons();
}

function showEmail(emailId) {
            // Hide all email contents
            const contents = document.querySelectorAll('.email-content');
            contents.forEach(content => content.style.display = 'none');

            // Show the selected email content
            document.getElementById(emailId).style.display = 'block';
        }

// Function to handle undo
function undo() {
    if (currentIndex > 0) {
        currentIndex--;
        const previousState = historyStack[currentIndex];
        // Restore the previous state
        document.getElementById('noteContent').value = previousState;
    }
    toggleButtons();
}

// Function to handle redo
function redo() {
    if (currentIndex < historyStack.length - 1) {
        currentIndex++;
        const nextState = historyStack[currentIndex];
        // Restore the next state
        document.getElementById('noteContent').value = nextState;
    }
    toggleButtons();
}

function checkForUpdates() {
    if (localStorage.getItem('updateCheck')) {
        alert("Your site is up-to-date!");
        return; // Exit the function if the site is up-to-date
    }
   
    document.getElementById('loadingCircle').style.display = 'block';
    document.getElementById('updateButton').style.display = 'none';

    // Simulate checking for updates
    setTimeout(() => {
        document.getElementById('loadingCircle').style.display = 'none';
        showMessageBox("Shutting down OS site...");
        startBootAnimation();
    }, 10000); // 10 seconds for shutdown
}

function startBootAnimation() {
    document.getElementById('updateModal').classList.remove('hidden');
    document.getElementById('bootAnimation').style.display = 'block';

    // Show boot animation for 15 seconds
    setTimeout(() => {
        document.getElementById('bootAnimation').style.display = 'none';
        startUpdate();
    }, 15000); // 15 seconds for boot animation
}

function startUpdate() {
    localStorage.setItem('updateCheck', 'true');
    document.getElementById('modalProgress').style.display = 'block';
    document.getElementById('modalProgress').value = 0;

    let progress = 0;
    const updateDuration = 600000; // 10 minutes in milliseconds
    const updateInterval = setInterval(() => {
        progress += (100 / (updateDuration / 600)); // Increment progress based on total duration
        document.getElementById('modalProgress').value = Math.min(progress, 100); // Ensure it doesn't exceed 100

        if (progress >= 100) {
            clearInterval(updateInterval);
            setTimeout(() => {
                showOptimizationText();
            }, 5000); // 5 seconds gap before showing optimization text
        }
    }, 600); // Update every 600 milliseconds
}

function showOptimizationText() {
    document.getElementById('setupMessage').classList.remove('hidden');

    // Hide the setup message after 2 minutes
    setTimeout(() => {
        document.getElementById('setupMessage').classList.add('hidden');
        showMessageBox("Update successful!");
        // Optionally, redirect to the main section
        showSection('combinedContainer');
        document.getElementById('updateModal').classList.add('hidden'); // Hide the modal
    }, 120000); // 2 minutes
}



function toggleSection(sectionId) {
    const section = document.getElementById(sectionId);
    section.classList.toggle('hidden');
    section.classList.toggle('open'); // Add or remove the open class
    const toggleIcon = document.getElementById(sectionId + 'Toggle');
    toggleIcon.textContent = toggleIcon.textContent === '+' ? '-' : '+';
}

function goBack() {
    // Hide all sections when going back
    const sections = document.querySelectorAll('.setting-category div');
    sections.forEach(section => {
        section.classList.add('hidden');
    });

    // Reset toggle icons to plus
    const toggleIcons = document.querySelectorAll('.toggle-icon');
    toggleIcons.forEach(icon => {
        icon.textContent = '+';
    });
}

function showTab(tabId) {
    // Hide all tab contents
    const tabContents = document.querySelectorAll('.tab-content');
    tabContents.forEach(content => {
        content.classList.remove('active');
    });

    // Remove active class from all tab buttons
    const tabButtons = document.querySelectorAll('.tab-button');
    tabButtons.forEach(button => {
        button.classList.remove('active');
    });

    // Show the selected tab content
    document.getElementById(tabId).classList.add('active');

    // Set the clicked tab button as active
    const activeButton = Array.from(tabButtons).find(button => button.textContent === tabId.replace(/([A-Z])/g, ' $1').trim());
    if (activeButton) {
        activeButton.classList.add('active');
    }
}

// Function to toggle sections within the settings
function toggleSection(sectionId) {
    const section = document.getElementById(sectionId);
    if (section) {
        section.classList.toggle('hidden');
        const toggleIcon = document.getElementById(sectionId + 'Toggle');
        if (toggleIcon) {
            toggleIcon.textContent = toggleIcon.textContent === '+' ? '-' : '+';
        }
    }
}

function clearData() {
    if (confirm("Are you sure you want to clear all data? This action cannot be undone.")) {
        localStorage.removeItem('notes');
        localStorage.removeItem('lists');
        notes = [];
        lists = [];
        displayNotes();
        displayLists();
        showMessageBox("All data cleared successfully!");
    }
}

function encryptData() {
    const encryptedNotes = btoa(JSON.stringify(notes)); // Base64 encode the notes
    const encryptedLists = btoa(JSON.stringify(lists)); // Base64 encode the lists
    showMessageBox("This feature is buggy and may not work as expected. Use with cuation your old data may be deleted");
    localStorage.setItem('encryptedNotes', encryptedNotes);
    localStorage.setItem('encryptedLists', encryptedLists);
    showMessageBox("Data encrypted successfully!");

}

function decryptData() {
    const encryptedNotes = localStorage.getItem('encryptedNotes');
    const encryptedLists = localStorage.getItem('encryptedLists');
    showMessageBox("This feature is buggy and may not work as expected. Use with cuation your old data may be deleted");

    if (encryptedNotes) {
        notes = JSON.parse(atob(encryptedNotes)); // Base64 decode the notes
    } else {
        notes = [];
    }

    if (encryptedLists) {
        lists = JSON.parse(atob(encryptedLists)); // Base64 decode the lists
    } else {
        lists = [];
    }

    localStorage.setItem('notes', JSON.stringify(notes)); // Save decrypted notes back to local storage
    localStorage.setItem('lists', JSON.stringify(lists)); // Save decrypted lists back to local storage
    displayNotes();
    displayLists();
    showMessageBox("Data decrypted successfully!");
    
}

// Function to toggle button states (enable/disable)
function toggleButtons() {
    const undoButton = document.getElementById('undoButton');
    const redoButton = document.getElementById('redoButton');
    
    // Enable/Disable Undo button
    undoButton.disabled = currentIndex <= 0;
    
    // Enable/Disable Redo button
    redoButton.disabled = currentIndex >= historyStack.length - 1;
}

// Event listener to automatically save the content whenever the user types
document.getElementById('noteContent').addEventListener('input', saveState);

// Initial call to enable/disable buttons on page load
toggleButtons();

function openSNBAKeySetupModal() {
    document.getElementById('snbakeySetupModal').classList.remove('hidden');
}

function startScan() {
    const scanStatus = document.getElementById('scanStatus');
    const resultsContainer = document.getElementById('resultsContainer');
    const scanCircle = document.getElementById('scanCircle');

    // Reset results and status
    resultsContainer.innerHTML = ""; // Clear previous results
    scanStatus.textContent = "Scanning for sensitive data and SNBA keys...";
    scanCircle.style.borderColor = "#4CAF50"; // Start with green
    scanCircle.style.animation = "spin 1s linear infinite"; // Start spinning

    // Retrieve SNBA key and notes from local storage
    const snbaKey = localStorage.getItem('snbaKey');
    const notes = JSON.parse(localStorage.getItem('notes')) || []; // Assuming notes are stored as an array of objects

    let foundSensitiveData = [];
    let threatsCount = 0;

    // Check each note
    notes.forEach(note => {
        if (note && !note.password) { // Check if the note is defined and not password-protected
            const sensitiveKeywords = ["password", "SSN", "credit card", "bank account", "secret"];
            const noteContent = note.content.toLowerCase();
            const noteTitle = note.title;

            // Check for sensitive keywords
            sensitiveKeywords.forEach(keyword => {
                if (noteContent.includes(keyword.toLowerCase())) {
                    foundSensitiveData.push(`Sensitive data found in note: "${noteTitle}"`);
                    threatsCount++;
                }
            });
        }
    });

    // Prepare results
    if (snbaKey) {
        resultsContainer.innerHTML += "<div>SNBA Key is set up.</div>";
    } else {
        resultsContainer.innerHTML += "<div>SNBA Key not found.</div>";
        threatsCount++; // Count this as a threat
    }

    // Display sensitive data results
    if (foundSensitiveData.length > 0) {
        foundSensitiveData.forEach(result => {
            resultsContainer.innerHTML += `<div>${result}</div>`;
        });
    }

    // Update scan circle based on threats found
    if (threatsCount === 0) {
        scanCircle.style.borderColor = "#4CAF50"; // Green for no threats
        scanCircle.style.animation = "none"; // Stop spinning
        resultsContainer.innerHTML += "<div>No threats found. Your notes are secure!</div>";
    } else if (threatsCount === 1) {
        scanCircle.style.borderColor = "orange"; // Half red for one threat
        scanCircle.style.animation = "none"; // Stop spinning
    } else {
        scanCircle.style.borderColor = "red"; // Full red for multiple threats
        scanCircle.style.animation = "none"; // Stop spinning
    }
}

// Call startScan when needed, e.g., on button click


// Function to verify the SNBA key
window.onload = function() {
    const storedKey = localStorage.getItem('snbakey'); // Check if SNBA key is stored

    if (storedKey) {
        // If SNBA key is found, show the verification modal
        document.getElementById('snbakeyVerificationModal').classList.remove('hidden');
    } else {
        // If no SNBA key is found, show the setup modal
        document.getElementById('snbakeyVerificationModal').classList.add('hidden');
        showMessageBox('Welcome Back!');
    }
};

// Function to save the SNBA key
function saveSNBAKey() {
    const snbakey = document.getElementById('snbakey').value;
    const confirmSnbakey = document.getElementById('confirmSnbakey').value;

    if (snbakey !== confirmSnbakey) {
        showMessageBox("SNBA Keys do not match!");
        return;
    }

    // Save the SNBA key securely (e.g., encrypt and store in local storage)
    localStorage.setItem('snbakey', snbakey); // Store the SNBA key
    showMessageBox("Your SNBA key has been set up successfully!");
    closeSNBAKeySetupModal();
}

// Function to close the SNBA key setup modal
function closeSNBAKeySetupModal() {
    document.getElementById('snbakeySetupModal').classList.add('hidden');
}

// Function to verify the SNBA key
function verifySNBAKey() {
    const enteredKey = document.getElementById('snbakeyInput').value;
    const storedKey = localStorage.getItem('snbakey'); // Get the stored SNBA key

    if (enteredKey === storedKey) {
        // Correct SNBA key, continue loading the app
        document.getElementById('snbakeyVerificationModal').classList.add('hidden');
        showMessageBox("SNBA Key verified successfully!"); // Optional: Show a success message
        showMessageBox('Welcome Back!');
        // Load the rest of the app or redirect to the main page
    } else {
        // Incorrect SNBA key, prompt the user
        alert("Incorrect SNBA Key! Please try again.");
    }
}
   


        
        function closeListPasswordModal() {
            document.getElementById('listPasswordModal').style.display = 'none';

        }

        function closeDeleteListPasswordModal() {
            document.getElementById('deleteListPasswordModal').style.display = 'none';

        }

       

        function showCredits() {
            const credits = document.getElementById('creditsSection');
            credits.style.display = credits.style.display === 'none' ? 'block' : 'none';
        }

       
        function updateDataStats() {
    const noteCount = document.getElementById('noteCount');
    const listCount = document.getElementById('listCount');

    // Count the number of notes and lists
    noteCount.textContent = notes.length; // Update the note count
    listCount.textContent = lists.length; // Update the list count
}


        

        function backupNotes() {
            const blob = new Blob([JSON.stringify(notes)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'notes_backup.json';
            a.click();
            URL.revokeObjectURL(url);
        }

        function prepareImport(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const importedNotes = JSON.parse(e.target.result);
                    notes = [...notes, ...importedNotes];
                };
                reader.readAsText(file);
            }
        }

        document.getElementById('notifyButton').onclick = function() {
        if (Notification.permission === "granted") {
            new Notification("Reminder!", { body: "Don't forget to check your notes!" });
        } else if (Notification.permission !== "denied") {
            Notification.requestPermission().then(permission => {
                if (permission === "granted") {
                    new Notification("Reminder!", { body: "Don't forget to check your notes!" });
                }
            });
        }
    };

        function importNotes() {
            const fileInput = document.getElementById('importFile');
            if (!fileInput.files.length) {
                showMessageBox("No file selected!");
                return;
            }

            localStorage.setItem('notes', JSON.stringify(notes));
            displayNotes();
            showMessageBox('Notes imported successfully!');
        }



        // Function to toggle edit note mode
        

        let currentDate = new Date(); // Initialize current date

        function displayCalendar() {
            const monthYear = document.getElementById('monthYear');
            const daysContainer = document.getElementById('daysContainer');

            // Get the current month and year
            const month = currentDate.getMonth();
            const year = currentDate.getFullYear();

            // Set the month and year in the header
            monthYear.innerHTML = `${currentDate.toLocaleString('default', { month: 'long' })}<br><span style="font-size:18px">${year}</span>`;

            // Clear previous days
            daysContainer.innerHTML = '';

            // Get the first day of the month (0 = Sunday, 1 = Monday, ..., 6 = Saturday)
            const firstDay = new Date(year, month, 1).getDay();
            const lastDate = new Date(year, month + 1, 0).getDate(); // Last date of the month

            // Fill the days with empty cells for days before the first of the month
            for (let i = 0; i < (firstDay === 0 ? 6 : firstDay - 1); i++) {
                daysContainer.innerHTML += '<li></li>'; // Empty cells for days before the first of the month
            }

            // Fill the days of the month
            for (let day = 1; day <= lastDate; day++) {
                const isToday = (day === new Date().getDate() && month === new Date().getMonth() && year === new Date().getFullYear());
                daysContainer.innerHTML += `<li${isToday ? ' class="active"' : ''}>${day}</li>`;
            }
        }

        // Function to change the month
        function changeMonth(direction) {
            currentDate.setMonth(currentDate.getMonth() + direction);
            displayCalendar(); // Refresh the calendar display
        }

        // Call displayCalendar on page load
        document.addEventListener("DOMContentLoaded", function () {
            displayCalendar(); // Display the calendar when the page loads
        });

        function searchNotes() {
            showMessageBox('The Dymatic Search that is in develpment wiill replace this search feature. ')
        }

        function formatDate(date) {
            const options = { day: 'numeric', month: 'long', year: 'numeric' };
            return date.toLocaleDateString('en-US', options);
        }


        // Function to display filtered notes
        function displayFilteredNotes(filteredNotes) {
            const container = document.getElementById('notesContainer');
            container.innerHTML = ""; // Clear existing notes
            const noNotesMessage = document.getElementById('noNotesMessage');

            if (filteredNotes.length === 0) {
                noNotesMessage.classList.remove('hidden'); // Show no notes message
            } else {
                noNotesMessage.classList.add('hidden'); // Hide no notes message
            }

            filteredNotes
                .forEach((note, index) => {
                    const noteDiv = document.createElement('div');
                    noteDiv.innerHTML = `
            <div class="note" onclick="openNote(${index})"> 
                <h4>${note.title}</h4>
                <span class="note-date">${note.date}</span> <!-- Display the date here -->
                <button onclick="deleteNote(${index})">Delete</button>
            </div>
        `;
                    container.appendChild(noteDiv);
                });
        }

        // Function to close the list password modal
        function toggleFeatureSection(sectionId) {
            const sections = ['privacyInfoSection', 'calculatorSection', 'notificationPanel']; // Add all feature section IDs here
            sections.forEach(section => {
                const element = document.getElementById(section);
                if (section === sectionId) {
                    element.classList.toggle('hidden'); // Toggle the selected section
                } else {
                    element.classList.add('hidden'); // Hide other sections
                }
            });
        }

        // Function to close a specific feature section
        function closeFeatureSection(sectionId) {
            const element = document.getElementById(sectionId);
            element.classList.add('hidden'); // Hide the specified section
        }

        function toggleSearchInput() {
            showMessageBox('The Dymatic Search that is in develpment wiill replace this search feature. ')


            
        }



        function showListPassword() {
            const listPasswordInput = document.getElementById('listPassword');
            listPasswordInput.classList.toggle('hidden'); // Toggle visibility of the password input
        }

        // Function to verify the password for accessing the list
        function verifyListPassword() {
            const password = document.getElementById('listPasswordInput').value;
            const listIndex = document.getElementById('listPasswordModal').dataset.listIndex; // Assuming you set this when opening the modal
            const list = lists[listIndex]; // Get the list being accessed

            if (password === list.password) {
                document.getElementById('listPasswordModal').style.display = 'none'; // Close the modal
                document.getElementById('listTitle').value = list.title;
                currentItems = list.items.slice(); // Copy items to currentItems
                displayChecklist(); // Display the checklist with items
                editingListIndex = listIndex; // Update the editing list index
                showAddListSection();// Implement this function to display the list content
                document.getElementById('listPassword').value = list.password;
            } else {
                showMessageBox("Incorrect password!"); // Show an error message
            }
        }

        function appendToCalculator(value) {
            const calculatorInput = document.getElementById('calculatorInput');
            if (calculatorInput.value === "0" && value !== '.') {
                calculatorInput.value = value; // Replace 0 with the first number
            } else {
                calculatorInput.value += value; // Append the value
            }
        }





        function calculateResult() {
            const calculatorInput = document.getElementById('calculatorInput');
            try {
                calculatorInput.value = eval(calculatorInput.value); // Evaluate the expression
            } catch (error) {
                calculatorInput.value = "Error"; // Handle any errors
            }
        }

        function clearCalculator() {
            document.getElementById('calculatorInput').value = "0"; // Reset the calculator
        }


        // Function to show alert when a feature is not implemented
        function showAlert(feature) {
            alert(`${feature} feature is not implemented yet.`);
        }
        // Function to show the delete password modal


        // Function to close the delete list password mod

        // Function to verify the password for deleting the list
        // Function to verify the password for deleting the list
        function deleteListVerifyPassword() {
            const passwordInput = document.getElementById('deleteListPasswordInput').value;
            const index = document.getElementById('deleteListPasswordModal').dataset.listIndex; // Get the index of the list being deleted

            console.log("List Index:", index); // Debugging line

            const list = lists[index]; // Get the list being deleted

            if (!list) {
                console.error("List not found at index:", index); // Log an error if the list is undefined
                return; // Exit the function if the list is not found
            }

            if (passwordInput === list.password) {
                // If the password is correct, delete the list
                lists.splice(index, 1);
                localStorage.setItem('lists', JSON.stringify(lists));
                document.getElementById('deleteListPasswordModal').style.display = 'none';
                document.getElementById('listPasswordModal').style.display = 'none';
                displayLists();
            } else {
                showMessageBox("Incorrect password!"); // Show an error message
            }
        }

        // Function to toggle the password input field
        function togglePasswordInput() {
            const passwordInput = document.getElementById('notePassword');
            passwordInput.classList.toggle('hidden');
        }



        function showSection(sectionId) {
            document.querySelectorAll('.container').forEach(section => {
                section.classList.add('hidden'); // Hide all sections
            });
            document.getElementById(sectionId).classList.remove('hidden'); // Show the selected section

            // Manage history stack
            if (historyStack[historyStack.length - 1] !== sectionId) {
                historyStack.push(sectionId);
            }




            currentSection = sectionId; // Update current section
        }





        // Event listener for the Android back button functionality
        window.addEventListener('popstate', function (event) {
            if (historyStack.length > 1) {
                historyStack.pop(); // Remove the current section
                const previousSection = historyStack.pop(); // Get the previous section
                showSection(previousSection); // Show the previous section
                historyStack.push(previousSection); // Push it back to maintain history
            }
        });

        let isMessageBoxVisible = false; // Flag to track visibility
        function showMessageBox(message) {
            if (isMessageBoxVisible) return; // Prevent showing if already visible

            const messageBox = document.getElementById('messageBox');
            messageBox.textContent = message; // Set the message text
            messageBox.style.display = 'block'; // Show the message box
            isMessageBoxVisible = true; // Set the flag to true

            // Fade out effect after 3 seconds
            setTimeout(function () {
                messageBox.style.opacity = '0'; // Start fading out
                setTimeout(function () {
                    messageBox.style.display = 'none'; // Hide the message box after fading out
                    messageBox.style.opacity = '1'; // Reset opacity for next display
                    isMessageBoxVisible = false; // Reset the flag to allow showing again
                }, 1000); // Wait for the fade out transition to complete
            }, 1000); // Show for 3 seconds
        }


        function showAddNote() {
            showSection('addNoteSection');
            document.getElementById('noteContent').value = ""; // Clear the note content
            document.getElementById('notePassword').value = ""; // Clear the password input
          
            if (editingNoteIndex !== null) {
                // Editing an existing note
                const note = notes[editingNoteIndex]; // Get the note being edited
                document.getElementById('noteTitle').value = note.title; // Set the input value to the note title
                document.getElementById('noteContent').value = note.content; // Set the input value to the note content
                document.getElementById('manageNoteTitle').textContent = `Manage Your ${note.title} Note`; // Update title with the actual note title
              
            } else {
                // Creating a new note
                document.getElementById('noteTitle').value = ""; // Clear the title input
                document.getElementById('manageNoteTitle').textContent = "Add New Note"; // Set title for new note
                
            }
            closeAddOptions(); // Close the add options modal
        }

        // Function to cancel note and reset visibility
        function cancelNote() {
const section = document.getElementById('addNoteSection');
            section.classList.add('hidden');
          showSection('combinedContainer');
        }

        // Add event listener for the Add Note button
        document.getElementById('addNoteButton').addEventListener('click', function () {
            editingNoteIndex = null; // Reset the editing index for a new note
            showAddNote(); // Show the add note section
        });

        function saveNote() {
            const title = document.getElementById('noteTitle').value.trim();
            const content = document.getElementById('noteContent').value.trim();
            const password = document.getElementById('notePassword').value.trim();
            const date = new Date(); // Get the current date
            const formattedDate = formatDate(date); // Format the date


            if (content === "") {
                showMessageBox("Note content cannot be empty!");
                return;
            }

            if (editingNoteIndex !== null) {
                // Update existing note
                notes[editingNoteIndex] = { title, content, password, date }; // Include date
                showMessageBox("Note updated successfully!");
            } else {
                // Add new note
                const note = { title, content, password, date }; // Include date
                notes.push(note);
                showMessageBox("Note saved successfully!");
            }

            localStorage.setItem('notes', JSON.stringify(notes));
            displayNotes();
            updateDataStats();
            showSection('combinedContainer');
           

            // Reset editing state
            editingNoteIndex = null; // Reset after saving
        }

        function showNotification(message) {
            const notificationList = document.getElementById('notificationList');
            const notificationItem = document.createElement('div');
            notificationItem.textContent = message;
            notificationList.appendChild(notificationItem);
            document.getElementById('notificationModal').style.display = 'block';
        }

        function closeNotificationModal() {
            document.getElementById('notificationModal').style.display = 'none';
        }

        function displayNotes() {
            const container = document.getElementById('notesContainer');
            container.innerHTML = "";
            const noNotesMessage = document.getElementById('noNotesMessage'); // Get the no notes message element
            if (notes.length === 0) {
                noNotesMessage.classList.remove('hidden'); // Show the no notes message
            } else {
                noNotesMessage.classList.add('hidden');
            } // Hide the no notes message
            notes.forEach((note, index) => {
                const noteDiv = document.createElement('div');
                const noteDate = new Date(note.date); // Convert the stored date string back to a Date object
                const formattedDate = formatDate(noteDate); // Format the date for display
                noteDiv.innerHTML = `
       <div class="note" onclick="openNote(${index})">  
       <h4>${note.title}</h4>
          <span class="note-date">${formattedDate}</span>
          <button class="delete-btn" onclick="deleteNote(${index})">Delete</button>
        </div>
          `;
                container.appendChild(noteDiv);
            });

        }

        function openNote(index) {
            const note = notes[index];

            if (note.password) {
                document.getElementById('passwordModal').style.display = 'flex';
                document.getElementById('passwordInput').value = "";
                document.getElementById('passwordModal').dataset.noteIndex = index;
            } else {
                showNoteContent(note);
            }
        }

        

        document.addEventListener("DOMContentLoaded", function () {
            // Hide all sections initially
            document.querySelectorAll('.container').forEach(section => {
                section.classList.add('hidden'); // Hide all sections
            });

            // Show only the notes section on page load
            showSection('combinedContainer'); // Show the notes section

            // Load notes and lists from local storage
            displayNotes();
            displayLists();
        });



        function showListsSection() {
            showSection('combinedContainer'); // Show the lists container
            displayLists(); // Refresh the displayed lists
            document.getElementById('addListSection').classList.add('hidden'); // Ensure add list section is hidden
        }

        function verifyPassword() {
            const password = document.getElementById('passwordInput').value;
            const index = document.getElementById('passwordModal').dataset.noteIndex;
            const note = notes[index];

            if (password === note.password) {
                document.getElementById('passwordModal').style.display = 'none';
                showNoteContent(note);
            } else {
                showMessageBox("Incorrect password!");
            }
        }

        function deleteVerifyPassword() {
    const passwordInput = document.getElementById('deletePasswordInput').value;
    const index = document.getElementById('deletePasswordModal').dataset.noteIndex; // Get the index of the note being deleted
    const note = notes[index]; // Get the note being deleted

    if (passwordInput === note.password) {
        // If the password is correct, delete the note
        notes.splice(index, 1);
        localStorage.setItem('notes', JSON.stringify(notes)); // Update local storage
        displayNotes(); // Refresh the displayed notes
        closeDeletePasswordModal(); // Close the modal
    } else {
        showMessageBox("Incorrect password!"); // Show an error message
    }
}

        function showNoteContent(note) {
            document.getElementById('noteTitle').value = note.title;
            document.getElementById('noteContent').value = note.content;
            document.getElementById('notePassword').value = note.password;
            document.getElementById('manageNoteTitle').textContent = `Manage Your ${note.title}`; // Update the title to reflect the note being managed
            showSection('addNoteSection');
            // Set the index of the note being edited
            editingNoteIndex = notes.findIndex(n => n.title === note.title && n.content === note.content);
        closeAddOptions()
        }



        // Modify the deleteNote function to include password verification
     

        function deleteNote(index) {
    const note = notes[index];
    if (note.password) {
        // Show the delete password modal if the note has a password
        document.getElementById('deletePasswordModal').style.display = 'flex';
        document.getElementById('deletePasswordInput').value = ""; // Clear the input
        document.getElementById('deletePasswordModal').dataset.noteIndex = index; // Store the index
    } else {
        // If no password is required, confirm deletion
        if (confirm("Are you sure you want to delete this note?")) {
            notes.splice(index, 1); // Remove the note
            localStorage.setItem('notes', JSON.stringify(notes)); // Update local storage
            displayNotes(); // Refresh the displayed notes
        }
    }
}

function closeDeletePasswordModal() {
    document.getElementById('deletePasswordModal').style.display = 'none'; // Hide the modal
    document.getElementById('deletePasswordInput').value = ""; // Clear the input
}

        function closeAddListSection() {
            document.getElementById('addListSection').classList.add('hidden'); // Hide the add list section
            showSection('combinedContainer'); // Show the lists section
        }

        // Function to show the add options modal
        function showAddOptions() {
            console.log("showAddOptions called"); // Debugging line
            const modal = document.getElementById('addOptionsModal');
            modal.classList.remove('hidden');
        }



        function closeAddOptions() {
            const modal = document.getElementById('addOptionsModal');
            modal.classList.add('hidden'); // Hide the modal
            

        }

        // Function to open a list and pre-fill the add list section


        // Function to show the add list section
        // Function to show the add list section
        function showAddListSection() {
            // Hide all sections first
           
            document.querySelectorAll('.container').forEach(section => {
                section.classList.add('hidden'); // Hide all sections
            });

            // Show the add list section
            document.getElementById('addListSection').classList.remove('hidden'); // Show the add list section
           
            // Check if we are editing an existing list
            if (editingListIndex !== null) {
                const list = lists[editingListIndex]; // Get the list being edited
                document.getElementById('listTitle').value = list.title; // Set the input value to the list title
                currentItems = list.items.slice(); // Copy items to currentItems
                displayChecklist(); // Display the checklist with items
                document.getElementById('manageListTitle').textContent = `Manage Your ${list.title} List`; // Update title with the actual list title
               
            } else {
                // Reset for new list
                document.getElementById('listTitle').value = ""; // Clear the title input
                document.getElementById('manageListTitle').textContent = "Manage Your New List"; // Default title for new list
                currentItems = []; // Reset current items
                displayChecklist(); // Clear the checklist display
                
               
            }

            closeAddOptions(); // Close any open options
        }

        // Function to cancel adding a list
        function cancelList() {
            // Hide the add list section and show the lists section
            document.getElementById('addListSection').classList.add('hidden'); // Hide the add list section
           showSection('combinedContainer'); // Show the lists section
displayNotes();
displayLists();
        }

        // Function to show a specific section




        // Function to save a new list
        function saveList() {
            const title = document.getElementById('listTitle').value.trim();
            const password = document.getElementById('listPassword').value.trim(); // Get password
            const date = new Date(); // Get the current date
            const formattedDate = formatDate(date); // Format the date

            if (title === "" || currentItems.length === 0) {
                showMessageBox("List title and items cannot be empty!");
                return;
            }

            if (editingListIndex !== null) {
                // Update existing list
                lists[editingListIndex] = { title, items: currentItems.slice(), password, date: formattedDate }; // Update the existing list and set the new date
                showMessageBox("List updated successfully!");
            } else {
                // Add new list
                const newList = { title, items: currentItems.slice(), password, date: formattedDate }; // Create a new list with the date
                lists.push(newList); // Add the new list to the lists array
                showMessageBox("List saved successfully!");
            }

            localStorage.setItem('lists', JSON.stringify(lists)); // Save to local storage
            displayLists(); // Refresh the displayed lists
           
            showSection('combinedContainer'); // Show the lists section
            editingListIndex = null; // Reset editing state after saving
        }



        // Function to open a list and pre-fill the add list section
        function openList(index) {
            const list = lists[index];


            // Check if the list has a password
            if (list.password) {
                // Store the index of the list being accessed in the modal
                document.getElementById('listPasswordModal').dataset.listIndex = index;
                document.getElementById('listPasswordModal').style.display = 'flex';
            } else {
                // If no password is required, proceed to open the list
                document.getElementById('listTitle').value = list.title;
                currentItems = list.items.slice(); // Copy items to currentItems
                displayChecklist(); // Display the checklist with items
                editingListIndex = index;
                showAddListSection(); // Show the add list section
                document.getElementById('listPassword').value = list.password;
            }
        }


        document.getElementById('addListButton').addEventListener('click', function () {
            editingListIndex = null; // Reset the editing index for a new list
            showAddListSection(); // Show the add list section for a new list
        });

        const lists = JSON.parse(localStorage.getItem('lists')) || [];
        let currentItems = []; // Array to hold current checklist items

        // Function to show the lists section
        function showListsSection() {
            showSection('combinedContainer');
            displayLists(); // Refresh the displayed lists
        }

        function showListContent(list) {
            // Implement the logic to display the list content
            // For example, you might want to show the items in the list
            const checklistContainer = document.getElementById('checklistContainer');
            checklistContainer.innerHTML = ""; // Clear previous items

            list.items.forEach(item => {
                const itemDiv = document.createElement('div');
                itemDiv.textContent = item; // Display each item
                checklistContainer.appendChild(itemDiv);
            });

            // Show the section that contains the list content
            showSection('checklistContainer'); // Assuming you have a section to show the checklist
        }


        // Function to add an item to the checklist
        function addItem() {
            const newItemInput = document.getElementById('newItem');
            const newItemValue = newItemInput.value.trim();

            if (newItemValue === "") {
                showMessageBox("Item cannot be empty!");
                return;
            }

            currentItems.push(newItemValue); // Add the new item to the current items array
            newItemInput.value = ""; // Clear the input field
            displayChecklist(); // Update the checklist display
        }
        // Event listener for adding item with Enter key
        document.getElementById('newItem').addEventListener('keypress', function (event) {
            if (event.key === 'Enter') {
                addItem();
            }
        });

        // Event listener for switching to note content with Enter key
        document.getElementById('noteTitle').addEventListener('keypress', function (event) {
            if (event.key === 'Enter') {
                document.getElementById('noteContent').focus(); // Switch focus to note content
            }
        });

        // Event listener for submitting password with Enter key
        document.getElementById('passwordInput').addEventListener('keypress', function (event) {
            if (event.key === 'Enter') {
                verifyPassword(); // Call the function to verify password
            }
        });



        // Function to close the password modal
        function closePasswordModal() {
            document.getElementById('passwordModal').style.display = 'none';
            document.getElementById('passwordInput').value = ""; // Clear the password input field
        }

        // Event listener for closing the password modal with Escape key
        document.addEventListener('keydown', function (event) {
            if (event.key === 'Escape') {
                closePasswordModal(); // Close the modal
            }
        });




        // Function to display the checklist
        function displayChecklist() {
            const checklistContainer = document.getElementById('checklistContainer');
            checklistContainer.innerHTML = ""; // Clear existing items

            currentItems.forEach((item, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.innerHTML = `
            <div class="checklist-item">
        <input type="checkbox" id="item-${index}">
        <label for="item-${index}">${item}</label>
        <button onclick="removeItem(${index})">Remove</button>
    </div>
        `;
                checklistContainer.appendChild(itemDiv);
            });
        }

        // Function to remove an item from the checklist
        function removeItem(index) {
            currentItems.splice(index, 1); // Remove the item from the array
            displayChecklist(); // Update the checklist display
        }




        // Function to display lists
        function displayLists() {
            const container = document.getElementById('listsContainerContent');
            container.innerHTML = ""; // Clear existing lists
            const noListsMessage = document.getElementById('noListsMessage'); // Get
            if (lists.length === 0) {
                noListsMessage.classList.remove('hidden'); // Show the no lists message
            } else {
                noListsMessage.classList.add('hidden');
            } // Hide the no lists message
            lists.forEach((list, index) => {
                const listDiv = document.createElement('div');
                const listDate = new Date(list.date); // Convert the stored date string back to a Date object
                const formattedDate = formatDate(listDate); // Format the date for display
                listDiv.innerHTML = `
        
        <div class="note" onclick="openList(${index})">    
        <i class="fas fa-list"></i> <!-- List Icon -->
           
            <h4>${list.title}</h4>
             <span class="list-date">${formattedDate}</span>
        <button class="delete-btn" onclick="deleteList(${index})">Delete</button>
        </div>
            `;
                container.appendChild(listDiv);
            });

        }

        // Function to delete a list
        function deleteList(index) {
            const list = lists[index];

            // Check if the list has a password
            if (list.password) {
                // Show the password modal for deletion
                document.getElementById('deleteListPasswordModal').style.display = 'flex';
                document.getElementById('deleteListPasswordModal').dataset.listIndex = index; // Set the index here
            } else {
                // If no password is required, confirm deletion
                if (confirm("Are you sure you want to delete this list?")) {
                    lists.splice(index, 1); // Remove the list
                    localStorage.setItem('lists', JSON.stringify(lists)); // Update local storage
                    displayLists(); // Refresh the displayed lists
                }
            }
        }

        // Function to cancel adding a list


        // Call displayLists on page load
        displayLists();
        displayNotes();



    </script>


</body>

</html>
